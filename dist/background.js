async function checkTranslationAPI(){try{const e=await chrome.i18n.getAcceptLanguages();return console.log("Available languages:",e),!0}catch(e){return console.error("API test failed:",e),!1}}chrome.runtime.onMessage.addListener(((e,a,n)=>{if("translate"===e.type){const{text:a,targetLang:r}=e.data,t=new URL("https://translate.googleapis.com/translate_a/single");return t.searchParams.append("client","gtx"),t.searchParams.append("sl","auto"),t.searchParams.append("tl",r),t.searchParams.append("dt","t"),t.searchParams.append("q",a),fetch(t).then((e=>e.json())).then((e=>{if(!e||!e[0])throw new Error("Invalid response from translation service");const a=e[0].map((e=>e[0])).join("");console.log("Translation successful:",a),n({translation:a})})).catch((e=>{console.error("Translation error:",e),n({error:e.message})})),!0}return!0})),chrome.runtime.onInstalled.addListener((()=>{console.log("Extension installed"),checkTranslationAPI()}));